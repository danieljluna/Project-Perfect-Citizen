#pragma once

#include <SFML/Graphics.hpp>
#include <iostream>
#include "desktop.h"

namespace ppc {


	///////////////////////////////////////////////////////////////////
	///@brief Class that handles Level transitions, saving/loading, etc
	///@author Nader Sleem
	///////////////////////////////////////////////////////////////////
	class World {
    public:

        enum DesktopList {
            //Fill with Enums as input files are made
            Count
        };

		enum FontList {
			//Fill with Enuns as Fonts are added
			Consola = 0,
			Micross,
			VT323Regular,
			FontCount
		};

		///////////////////////////////////////////////////////////////
		// Ctors
		///////////////////////////////////////////////////////////////
		World() = delete;

      /////////////////////////////////////////////////////////////////
      // Setters
      /////////////////////////////////////////////////////////////////

		///////////////////////////////////////////////////////////////
		///@brief Set the screen the game is played on.
		///@param [in] sf::RenderWindow
		///////////////////////////////////////////////////////////////
		static void setGameScreen(sf::RenderWindow&);

        ///////////////////////////////////////////////////////////////
		///@brief Set the Desktop currently used by World
		///////////////////////////////////////////////////////////////
		static void setCurrDesktop(ppc::Desktop&);

		///////////////////////////////////////////////////////////////
		///@brief Returns a pointer to the Game Screen
		///////////////////////////////////////////////////////////////
		static sf::RenderWindow& getGameScreen();

		///////////////////////////////////////////////////////////////
		///@brief Returns a pointer to the Current Desktop
		///////////////////////////////////////////////////////////////
		static Desktop& getCurrDesktop();

		///////////////////////////////////////////////////////////////
		// Desktop Manipulation
		///////////////////////////////////////////////////////////////

		///////////////////////////////////////////////////////////////
		///@brief Runs the main game loop with the given Desktop
		///////////////////////////////////////////////////////////////
		static bool runDesktop(ppc::Desktop&);

        static bool loadDesktop(DesktopList desk);

        ///////////////////////////////////////////////////////////////
        ///@brief Loads in a Desktop from a file to the World
        ///@details The imported Desktop becomes the new current 
        /// Desktop, while the old one (if there was one) is destroyed.
        ///////////////////////////////////////////////////////////////
        static bool loadDesktop(std::string filename);

		///////////////////////////////////////////////////////////////
		///@brief Initializes the fontMap of the World
		///////////////////////////////////////////////////////////////
		static void initFontMap();

		///////////////////////////////////////////////////////////////
		///@brief Returns the sf:Font of the given Font
		///////////////////////////////////////////////////////////////
		static sf::Font& getFont(FontList f);

        static void restartDesktop();

        static void quitDesktop();

		///////////////////////////////////////////////////////////////
		///@brief Runs the main game loop with the current Desktop
		///////////////////////////////////////////////////////////////
		static bool runCurrDesktop();


    private:

        static sf::RenderWindow* screen_;
        static ppc::Desktop* currDesktop_;

        static bool quitter;

        static std::map<DesktopList, std::string> desktopFileMap;

		static std::map<FontList, sf::Font> fontMap;
	};
};