#ifndef INPUT_HANDLER_H
#define INPUT_HANDLER_H


#include "subject.h"
#include <SFML/Window/Event.hpp>
#include <map>

namespace ppc {


///////////////////////////////////////////////////////////////////////
/// @brief Class that maps sf::Events to Subjects.
/// @author Daniel Luna
/// @details 
///////////////////////////////////////////////////////////////////////
class InputHandler {
public:

  /////////////////////////////////////////////////////////////////////
  // Constructors and Destructor
  /////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////
    /// @brief Default Constructor
    ///////////////////////////////////////////////////////////////////
    InputHandler();

    ///////////////////////////////////////////////////////////////////
    /// @brief Destructor
    ///////////////////////////////////////////////////////////////////
    ~InputHandler();

  /////////////////////////////////////////////////////////////////////
  // Manipulating Subjects
  /////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////
    /// @brief Adds a handle for the given event.
    /// @details If there is already a handle for the given EventType, 
    ///     then it is not duplicated.
    ///
    /// @param type The type of sf::Event to create a handle for.
    ///////////////////////////////////////////////////////////////////
    void addHandle(sf::Event::EventType type);

    ///////////////////////////////////////////////////////////////////
    /// @brief Called to register a given event.
    /// @details Finds the correct handle for the given event based on
    ///     its type, and then notifies the interested parties.
    ///
    /// @param ev The Event to handle.
    ///////////////////////////////////////////////////////////////////
    void registerEvent(sf::Event& ev);


  /////////////////////////////////////////////////////////////////////
  // Manipulating Observers
  /////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////
    /// @brief Attaches the observer to the EventType.
    /// @details 
    /// 
    /// @param type The EventType the Observer is interested in.
    /// @param obsvr A pointer to the Observer to add.
    /// @param forceCreation Whether or not the InputHandler should 
    ///     create a new handle for the given EventType if it doesn not
    ///     exist already.
    /// @return A bool denoting whether the Observer was mapped
    ///     successfully to a handle.
    ///////////////////////////////////////////////////////////////////
    bool addObserver(sf::Event::EventType type,
                     BaseObserver* obsvr,
                     bool forceCreation = false);


private:

    //Map of Events to Subjects
    std::map<sf::Event::EventType, Subject> inputMap;


};


};  //End namespace ppc


#endif //End INPUT_HANDLER_H
